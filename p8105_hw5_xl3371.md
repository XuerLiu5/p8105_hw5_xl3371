p8105_hw5_xl3371
================
Xuer Liu
2023-11-15

## Problem 2

Create a tidy dataframe containing data from all participants, including
the subject ID, arm, and observations over time:

- Start with a dataframe containing all file names; the list.files
  function will help
- Iterate over file names and read in data for each subject using
  purrr::map and saving the result as a new variable in the dataframe
- Tidy the result; manipulate file names to include control arm and
  subject ID, make sure weekly observations are “tidy”, and do any other
  tidying that’s necessary

Make a spaghetti plot showing observations on each subject over time,
and comment on differences between groups.

``` r
full_df = 
  tibble(
    files = list.files("./data/"),
    path = str_c("./data/", files)
  ) %>%
  mutate(data = map(path, read_csv)) %>%
  unnest()
```

``` r
tidy_df = 
  full_df %>%
  mutate(
    files = str_replace(files, ".csv", ""),
    arm = str_sub(files, 1, 3)) %>%
  pivot_longer(
    week_1:week_8,
    names_to = "week",
    values_to = "outcome",
    names_prefix = "week_") %>%
  mutate(week = as.numeric(week)) %>%
  select(arm, subject_id = files, week, outcome)
```

``` r
tidy_df %>%
  ggplot(aes(x = week, y = outcome, group = subject_id, color = arm)) + 
  geom_point() + 
  geom_path() + 
  labs(title = "Spaghetti plot of observations on each subject over time",
       x = "Week",
       y = "Outcome") +
  facet_grid(~arm) 
```

<img src="p8105_hw5_xl3371_files/figure-gfm/unnamed-chunk-3-1.png" width="90%" />
